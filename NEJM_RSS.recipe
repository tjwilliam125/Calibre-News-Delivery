from calibre.web.feeds.news import BasicNewsRecipe

class NEJM_RSS(BasicNewsRecipe):
    title          = 'New England Journal of Medicine (RSS)'
    __author__     = 'GitHub Action'
    language       = 'en'
    oldest_article = 7
    max_articles_per_feed = 30
    auto_cleanup   = True

    # Mimic a real browser to avoid "403 Forbidden" blocks
    header = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'}

    feeds = [
        ('Current Issue', 'https://www.nejm.org/action/showFeed?type=etoc&feed=rss&jc=nejm'),
        ('Online First', 'https://www.nejm.org/action/showFeed?type=publishAheadOfPrint&feed=rss&jc=nejm'),
        ('Reviews', 'https://www.nejm.org/action/showFeed?type=etoc&feed=rss&jc=nejm&category=review'),
    ]
