from calibre.web.feeds.news import BasicNewsRecipe

class NewYorker_Custom(BasicNewsRecipe):
    title          = 'The New Yorker (Custom)'
    __author__     = 'GitHub Action'
    language       = 'en'
    oldest_article = 7
    max_articles_per_feed = 20
    auto_cleanup   = True
    
    # Masquerade as a real Windows PC to bypass blocks
    header = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'}

    # Using RSS feeds avoids the complex login page entirely
    feeds = [
        ('News', 'https://www.newyorker.com/feed/news'),
        ('Culture', 'https://www.newyorker.com/feed/culture'),
        ('Humor', 'https://www.newyorker.com/feed/humor'),
        ('Tech', 'https://www.newyorker.com/feed/tech'),
        ('Books', 'https://www.newyorker.com/feed/books'),
    ]
